var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};(function(a){function f(H){return"[object Array]"===Object.prototype.toString.call(H)}function g(){for(var H=0;H<F.length;H++)F[H][0](F[H][1]);F=[],G=!1}function h(H,I){F.push([H,I]),G||(G=!0,E(g,0))}function j(H,I){function J(L){n(I,L)}function K(L){q(I,L)}try{H(J,K)}catch(L){K(L)}}function l(H){var I=H.owner,J=I.state_,K=I.data_,L=H[J],M=H.then;if("function"==typeof L){J=B;try{K=L(K)}catch(N){q(M,N)}}m(M,K)||(J===B&&n(M,K),J===C&&q(M,K))}function m(H,I){var J;try{if(H===I)throw new TypeError("A promises callback cannot return that same promise.");if(I&&("function"==typeof I||"object"===("undefined"==typeof I?"undefined":_typeof(I)))){var K=I.then;if("function"==typeof K)return K.call(I,function(L){J||(J=!0,I===L?o(H,L):n(H,L))},function(L){J||(J=!0,q(H,L))}),!0}}catch(L){return J||q(H,L),!0}return!1}function n(H,I){H!==I&&m(H,I)||o(H,I)}function o(H,I){H.state_===z&&(H.state_=A,H.data_=I,h(u,H))}function q(H,I){H.state_===z&&(H.state_=A,H.data_=I,h(v,H))}function s(H){var I=H.then_;H.then_=void 0;for(var J=0;J<I.length;J++)l(I[J])}function u(H){H.state_=B,s(H)}function v(H){H.state_=C,s(H)}function w(H){if("function"!=typeof H)throw new TypeError("Promise constructor takes a function argument");if(!1==this instanceof w)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[],j(H,this)}var x=a.Promise,y=x&&"resolve"in x&&"reject"in x&&"all"in x&&"race"in x&&function(){var H;return new x(function(I){H=I}),"function"==typeof H}();"undefined"!=typeof exports&&exports?(exports.Promise=y?x:w,exports.Polyfill=w):"function"==typeof define&&define.amd?define(function(){return y?x:w}):!y&&(a.Promise=w);var z="pending",A="sealed",B="fulfilled",C="rejected",D=function(){},E="undefined"==typeof setImmediate?setTimeout:setImmediate,F=[],G;w.prototype={constructor:w,state_:z,then_:null,data_:void 0,then:function(I,J){var K={owner:this,then:new this.constructor(D),fulfilled:I,rejected:J};return this.state_===B||this.state_===C?h(l,K):this.then_.push(K),K.then},"catch":function(I){return this.then(null,I)}},w.all=function(H){var I=this;if(!f(H))throw new TypeError("You must pass an array to Promise.all().");return new I(function(J,K){function L(Q){return N++,function(R){M[Q]=R,--N||J(M)}}for(var P,M=[],N=0,O=0;O<H.length;O++)P=H[O],P&&"function"==typeof P.then?P.then(L(O),K):M[O]=P;N||J(M)})},w.race=function(H){var I=this;if(!f(H))throw new TypeError("You must pass an array to Promise.race().");return new I(function(J,K){for(var M,L=0;L<H.length;L++)M=H[L],M&&"function"==typeof M.then?M.then(J,K):J(M)})},w.resolve=function(H){var I=this;return H&&"object"===("undefined"==typeof H?"undefined":_typeof(H))&&H.constructor===I?H:new I(function(J){J(H)})},w.reject=function(H){var I=this;return new I(function(J,K){K(H)})}})("undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?void 0:self:global:window);var BunnyFile={download:function(f){var g=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0,h=new XMLHttpRequest,j=new Promise(function(l,m){h.onload=function(){if(200===h.status){var n=h.response;l(n)}else m(h)}});return h.open("GET",f,!0),g&&(h.responseType="blob"),h.send(),j},getSignature:function(f){return new Promise(function(g){var h=new FileReader;h.onloadend=function(){for(var j=new Uint8Array(h.result).subarray(0,4),l="",m=0;m<j.length;m++)l+=j[m].toString(16);g(l)},h.readAsArrayBuffer(f)})},isJpeg:function(f){return-1<["ffd8ffe0","ffd8ffe1","ffd8ffe2"].indexOf(f)},isPng:function(f){return"89504e47"===f},base64ToBlob:function(f){for(var g=atob(f.split(",")[1]),h=f.split(",")[0].split(":")[1].split(";")[0],j=new ArrayBuffer(g.length),l=new Uint8Array(j),m=0;m<g.length;m++)l[m]=g.charCodeAt(m);return new Blob([j],{type:h})},blobToBase64:function(f){var g=new FileReader,h=new Promise(function(j,l){g.onloadend=function(){var m=g.result;j(m)},g.onerror=function(m){l(m)}});return g.readAsDataURL(f),h},getBlobLocalURL:function(f){if(!(f instanceof Blob||f instanceof File))throw new TypeError("Argument in BunnyFile.getBlobLocalURL() is not a Blob or File object");return URL.createObjectURL(f)}},BunnyImage={IMG_CONVERT_TYPE:"image/jpeg",IMG_QUALITY:0.7,getImage:function(f){return"string"==typeof f?this.getImageByURL(f):this.getImageByBlob(f)},getImageByURL:function(f){return this._toImagePromise(f,!0)},_toImagePromise:function(f){var g=1<arguments.length&&void 0!==arguments[1]&&arguments[1],h=new Image,j=new Promise(function(l,m){h.onload=function(){l(h)},h.onerror=function(n){m(n)}});return g&&(h.crossOrigin="Anonymous"),h.src=f,j},getImageByBlob:function(f){var g=BunnyFile.getBlobLocalURL(f);return this._toImagePromise(g)},getImageByBase64:function(f){return this._toImagePromise(f)},getImageByCanvas:function(f){var g=f.toDataURL(this.IMG_CONVERT_TYPE,this.IMG_QUALITY);return this._toImagePromise(g)},imageToCanvas:function(f){var g=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,h=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!f.complete)throw new Error("Can not create canvas from Image. Image is not loaded yet.");var j=document.createElement("canvas");return null===g&&null===h?(j.width=f.naturalWidth,j.height=f.naturalHeight,j.getContext("2d").drawImage(f,0,0)):(j.width=g,j.height=h,j.getContext("2d").drawImage(f,0,0,g,h)),j},imageToBase64:function(f){var g=1<arguments.length&&arguments[1]!==void 0?arguments[1]:null,h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;return this.imageToCanvas(f,g,h).toDataURL(this.IMG_CONVERT_TYPE,this.IMG_QUALITY)},imageToBlob:function(f){var g=1<arguments.length&&arguments[1]!==void 0?arguments[1]:null,h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;return BunnyFile.base64ToBlob(this.imageToBase64(f,g,h))},getImageURL:function(f){return f.src},getImageWidth:function(f){if(!f.complete)throw new Error("Can not get Image.width. Image is not loaded yet.");return f.width},getImageHeight:function(f){if(!f.complete)throw new Error("Can not get Image.height. Image is not loaded yet.");return f.height},getImageNewAspectSizes:function(f,g,h){var j=this.getImageWidth(f),l=this.getImageHeight(f);if(0===j||0===l)throw new Error("Image width or height is 0 in BunnyImage.getImageNewAspectSizes().");var m=Math.min(g/j,h/l);return{width:Math.floor(j*m),height:Math.floor(l*m)}},resizeImage:function(f,g,h){var j=this.getImageNewAspectSizes(f,g,h),l=j.width,m=j.height,n=this.imageToCanvas(f,l,m);return this.getImageByCanvas(n)}};var Ajax={create:function(f,g,h,j){var l=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null,m=5<arguments.length&&void 0!==arguments[5]?arguments[5]:{},n=6<arguments.length&&void 0!==arguments[6]?arguments[6]:!0,o=Object.create(this);return o.method=f,o.url=g,o.data=h,o.request=new XMLHttpRequest,o.onSuccess=j,o.onError=l,o.headers=m,o.request.onreadystatechange=function(){o.request.readyState===XMLHttpRequest.DONE&&(200===o.request.status?o.onSuccess(o.request.responseText):null===o.onError?console.error("Bunny AJAX error: unhandled error with response status "+o.request.status+" and body: "+o.request.responseText):o.onError(o.request.responseText,o.request.status))},n&&o.send(),o},send:function(){for(var f in this.request.open(this.method,this.url),this.headers)this.request.setRequestHeader(f,this.headers[f]);var g="";if(this.data instanceof FormData)this.request.send(this.data);else{for(var h in this.data)g=g+h+"="+encodeURIComponent(this.data[h])+"&";this.request.send(g)}},sendForm:function(f,g){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,j=3<arguments.length&&arguments[3]!==void 0?arguments[3]:{"Content-Type":"application/x-www-form-urlencoded"},l={};f.querySelectorAll("[name]").forEach(function(m){l[m.getAttribute("name")]=m.value}),this.create("POST",f.getAttribute("action"),l,g,h,j,!0)},sendFormWithFiles:function(f,g){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,j=3<arguments.length&&arguments[3]!==void 0?arguments[3]:{"Content-Type":"multipart/form-data"};this.sendForm(f,g,h,j)},get:function(f,g){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,j=3<arguments.length&&arguments[3]!==void 0?arguments[3]:{"X-Requested-With":"XMLHttpRequest"};this.create("GET",f,{},g,h,j,!0)},post:function(f,g,h){var j=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null,l=4<arguments.length&&arguments[4]!==void 0?arguments[4]:{"X-Requested-With":"XMLHttpRequest"};this.create("POST",f,g,h,j,l,!0)}},_typeof$1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},BunnyElement={getCurrentDocumentPosition:function(){var f=0<arguments.length&&arguments[0]!==void 0?arguments[0]:!0;return f?window.scrollY:window.scrollY+window.innerHeight},getPosition:function(f){var g=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0,h=0,j=f;if(f.offsetParent)do h+=f.offsetTop;while(f=f.offsetParent);return g||(h+=j.offsetHeight),h},isInViewport:function(f){var g=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,h=2<arguments.length&&arguments[2]!==void 0&&arguments[2],j=this.getCurrentDocumentPosition(h),l=this.getPosition(f,h);return l+g<=j},scrollToIfNeeded:function(f){var g=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,h=2<arguments.length&&arguments[2]!==void 0&&arguments[2],j=3<arguments.length&&arguments[3]!==void 0?arguments[3]:500,l=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0;this.isInViewport(f,g,h)||this.scrollTo(f,j,l)},scrollTo:function(f){var g=1<arguments.length&&arguments[1]!==void 0?arguments[1]:500,h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0;return new Promise(function(j){function l(w){v=w-u,window.scrollTo(0,n(v,q,s,g)),v<g?requestAnimationFrame(l):m()}function m(){window.scrollTo(0,q+s),j()}function n(w,x,y,z){return(w/=z/2,1>w)?y/2*w*w+x:(w--,-y/2*(w*(w-2)-1)+x)}var o;o="string"==typeof f?document.querySelector(f):"object"===("undefined"==typeof f?"undefined":_typeof$1(f))?f:null,null!==o&&null===o.offsetParent&&(o=o.parentNode);var q=window.pageYOffset,s=0;s=null===o?f:o.getBoundingClientRect().top,s+=h,"function"==typeof g&&(g=g(s));var u=0,v=0;requestAnimationFrame(function(w){u=w,l(w)})})},hide:function(f){return new Promise(function(g){f.style.opacity=0,f.style.overflow="hidden";var h=40,j=10,l=f.offsetHeight,m=Math.round(l/h);f._originalHeight=l;for(var n=function(s){s===h?setTimeout(function(){f.style.display="none",f.style.height="0px",g()},j*s):setTimeout(function(){f.style.height=m*(h-s)+"px"},j*s)},o=1;o<=h;o++)n(o)})},show:function(f){if(f._originalHeight===void 0)throw new Error("element._originalHeight is undefined. Save original height when hiding element or use BunnyElement.hide()");return new Promise(function(g){f.style.display="";var h=40,j=10,l=f._originalHeight,m=Math.round(l/h);delete f._originalHeight;for(var n=function(s){s===h?setTimeout(function(){f.style.opacity=1,f.style.height="",f.style.overflow="",g()},j*s):setTimeout(function(){f.style.height=m*s+"px"},j*s)},o=1;o<=h;o++)n(o)})},remove:function(f){f.parentNode.removeChild(f)}},_slicedToArray=function(){function a(f,g){var h=[],j=!0,l=!1,m;try{for(var o,n=f[Symbol.iterator]();!(j=(o=n.next()).done)&&(h.push(o.value),!(g&&h.length===g));j=!0);}catch(q){l=!0,m=q}finally{try{!j&&n["return"]&&n["return"]()}finally{if(l)throw m}}return h}return function(f,g){if(Array.isArray(f))return f;if(Symbol.iterator in Object(f))return a(f,g);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),ValidationConfig={classInputGroup:"field",classInputGroupError:"validator-is-danger",classLabel:"label",tagNameError:"p",classError:"help-is-danger",selectorInput:"[name]"},ValidationLang={required:"'{label}' is required",email:"'{label}' should be a valid e-mail address",url:"{label} should be a valid website URL",tel:"'{label}' is not a valid telephone number",maxLength:"'{label}' length must be < '{maxLength}'",minLength:"'{label}' length must be > '{minLength}'",maxFileSize:"Max file size must be < {maxFileSize}MB, uploaded {fileSize}MB",image:"'{label}' should be an image (JPG or PNG)",minImageDimensions:"'{label}' must be > {minWidth}x{minHeight}, uploaded {width}x{height}",maxImageDimensions:"'{label}' must be < {maxWidth}x{maxHeight}, uploaded {width}x{height}",requiredFromList:"Select '{label}' from list",confirmation:"'{label}' is not equal to '{originalLabel}'",minOptions:"Please select at least {minOptionsCount} options"},_bn_getFile=function(f){return void 0!==f._file&&""!==f._file?!1==f._file instanceof Blob?(console.error("Custom file for input "+f.name+" is not an instance of Blob"),!1):f._file:f.files[0]||!1},ValidationValidators={required:function(f){return new Promise(function(g,h){f.hasAttribute("required")?("file"===f.getAttribute("type")||""!==f.value)&&("radio"!==f.type&&"checkbox"!==f.type||f.checked)&&("file"!==f.getAttribute("type")||!1!==_bn_getFile(f))?g():h():g()})},email:function(f){return new Promise(function(g,h){if(0<f.value.length&&"email"===f.getAttribute("type")){var j=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;j.test(f.value)?g():h()}else g()})},url:function(f){return new Promise(function(g,h){if(0<f.value.length&&"url"===f.getAttribute("type")){var j=/(^|\s)((https?:\/\/)?[\w-]+(\.[\w-]+)+\.?(:\d+)?(\/\S*)?)/gi;j.test(f.value)?g():h()}else g()})},tel:function(f){return new Promise(function(g,h){if(0<f.value.length&&"tel"===f.getAttribute("type")){var j=/^([1-9])([0-9]{9})$/;j.test(f.value)?g():h()}else g()})},maxLength:function(f){return new Promise(function(g,h){null!==f.getAttribute("maxlength")&&f.value.length>f.getAttribute("maxlength")?h({maxLength:f.getAttribute("maxlength")}):g()})},minLength:function(f){return new Promise(function(g,h){null!==f.getAttribute("minlength")&&f.value.length<f.getAttribute("minlength")?h({minLength:f.getAttribute("minlength")}):g()})},maxFileSize:function(f){return new Promise(function(g,h){if("file"===f.getAttribute("type")&&f.hasAttribute("maxfilesize")&&!1!==_bn_getFile(f)){var j=parseFloat(f.getAttribute("maxfilesize")),l=(_bn_getFile(f).size/1e6).toFixed(2);l<=j?g(f):h({maxFileSize:j,fileSize:l})}else g(f)})},image:function(f){return new Promise(function(g,h){"file"===f.getAttribute("type")&&-1<f.getAttribute("accept").indexOf("image")&&!1!==_bn_getFile(f)?BunnyFile.getSignature(_bn_getFile(f)).then(function(j){BunnyFile.isJpeg(j)||BunnyFile.isPng(j)?g():h({signature:j})}).catch(function(j){h(j)}):g()})},minImageDimensions:function(f){return new Promise(function(g,h){f.hasAttribute("mindimensions")&&!1!==_bn_getFile(f)?function(){var j=f.getAttribute("mindimensions").split("x"),l=_slicedToArray(j,2),m=l[0],n=l[1];BunnyImage.getImageByBlob(_bn_getFile(f)).then(function(o){var q=BunnyImage.getImageWidth(o),s=BunnyImage.getImageHeight(o);q<m||s<n?h({width:q,height:s,minWidth:m,minHeight:n}):g()}).catch(function(o){h(o)})}():g()})},maxImageDimensions:function(f){return new Promise(function(g,h){f.hasAttribute("maxdimensions")&&!1!==_bn_getFile(f)?function(){var j=f.getAttribute("maxdimensions").split("x"),l=_slicedToArray(j,2),m=l[0],n=l[1];BunnyImage.getImageByBlob(_bn_getFile(f)).then(function(o){var q=BunnyImage.getImageWidth(o),s=BunnyImage.getImageHeight(o);q>m||s>n?h({width:q,height:s,maxWidth:m,maxHeight:n}):g()}).catch(function(o){h(o)})}():g()})},requiredFromList:function(f){return new Promise(function(g,h){var j=f.hasAttribute("requiredfromlist")?f.getAttribute("requiredfromlist"):f.name+"_id";var l=document.getElementById(j);l?0<l.value.length?g():h():g()})},minOptions:function(f){return new Promise(function(g,h){f.hasAttribute("minoptions")?function(){var j=parseInt(f.getAttribute("minoptions")),l=ValidationUI.getInputGroup(f),m=l.getElementsByTagName("input"),n=0;[].forEach.call(m,function(o){o!==f&&""!==o.value&&n++}),n<j?h({minOptionsCount:j}):g()}():g()})},confirmation:function(f){return new Promise(function(g,h){if(-1<f.name.indexOf("_confirmation")){var j=f.name.substr(0,f.name.length-13),l=document.getElementById(j);l.value==f.value?g():h({originalLabel:ValidationUI.getLabel(ValidationUI.getInputGroup(l)).textContent})}else g()})},ajax:function(f){return new Promise(function(g,h){if(f.dataset.ajax!==void 0&&0<f.value.length){var j=f.dataset.ajax.replace("{value}",encodeURIComponent(f.value));Ajax.get(j,function(l){l=JSON.parse(l),l.message!==void 0&&""!==l.message?h(l.message):g()},function(){h("Ajax error")})}else g()})}},ValidationUI={config:ValidationConfig,insertErrorNode:function(f,g){f.appendChild(g)},toggleErrorClass:function(f){f.classList.toggle(this.config.classInputGroupError)},createErrorNode:function(){var f=document.createElement(this.config.tagNameError);return f.classList.add(this.config.classError),f},getErrorNode:function(f){return f.getElementsByClassName(this.config.classError)[0]||!1},removeErrorNode:function(f){var g=this.getErrorNode(f);g&&(g.parentNode.removeChild(g),this.toggleErrorClass(f))},setErrorMessage:function(f,g){var h=this.getErrorNode(f);!1===h&&(h=this.createErrorNode(),this.toggleErrorClass(f),this.insertErrorNode(f,h)),h.textContent=g},getInput:function(f){return f.querySelector(this.config.selectorInput)||!1},getInputGroup:function(f){for(var g=f;(g=g.parentNode)&&!g.classList.contains(this.config.classInputGroup););return g},getInputsInSection:function(f){var g=1<arguments.length&&arguments[1]!==void 0&&arguments[1],h=this.getInputGroupsInSection(f),j;j=g?{inputs:{},invalidInputs:{},length:0,unresolvedLength:0,invalidLength:0}:[];for(var m,l=0;l<h.length;l++){if(m=this.getInput(h[l]),!1===m)throw console.error(h[l]),new Error("Bunny Validation: Input group has no input");g?(j.inputs[l]={input:m,isValid:null},j.length++,j.unresolvedLength++):j.push(m)}return j},getLabel:function(f){return f.getElementsByTagName("label")[0]||!1},getInputGroupsInSection:function(f){return f.getElementsByClassName(this.config.classInputGroup)}},Validation={validators:ValidationValidators,lang:ValidationLang,ui:ValidationUI,init:function(f){var g=this,h=1<arguments.length&&arguments[1]!==void 0&&arguments[1];f.setAttribute("novalidate",""),f.addEventListener("submit",function(j){j.preventDefault();var l=f.querySelectorAll("[type=\"submit\"]");[].forEach.call(l,function(m){m.disabled=!0}),g.validateSection(f).then(function(m){[].forEach.call(l,function(n){n.disabled=!1}),!0===m?([].forEach.call(l,function(n){n.disabled=!0}),f.submit()):g.focusInput(m[0])})}),h&&this.initInline(f)},initInline:function(f){var g=this,h=this.ui.getInputsInSection(f);h.forEach(function(j){j.addEventListener("change",function(){g.checkInput(j).catch(function(){})})})},validateSection:function(f){var g=this;if(f.__bunny_validation_state===void 0)f.__bunny_validation_state=!0;else throw new Error("Bunny Validation: validation already in progress.");return new Promise(function(h){var j=g.ui.getInputsInSection(f,!0);if(0===j.length)g._endSectionValidation(f,j,h);else{for(var m=function(q){var s=j.inputs[q].input;g.checkInput(s).then(function(){g._addValidInput(j,s),0===j.unresolvedLength&&g._endSectionValidation(f,j,h)}).catch(function(){g._addInvalidInput(j,s),0===j.unresolvedLength&&g._endSectionValidation(f,j,h)})},n=0;n<j.length;n++)m(n);setTimeout(function(){if(0<j.unresolvedLength)for(var o=g._getUnresolvedInputs(j),q=0;q<o.length;q++){var s=o[q],u=g.ui.getInputGroup(s);g._addInvalidInput(j,s),g.ui.setErrorMessage(u,"Validation terminated after 3s"),0===j.unresolvedLength&&g._endSectionValidation(f,j,h)}},3e3)}})},focusInput:function(f){var g=1<arguments.length&&arguments[1]!==void 0?arguments[1]:500,h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:-50;BunnyElement.scrollTo(f,g,h),f.focus(),null!==f.offsetParent&&f.setSelectionRange!==void 0&&-1!==["text","search","url","tel","password"].indexOf(f.type)&&"function"==typeof f.setSelectionRange&&f.setSelectionRange(f.value.length,f.value.length)},checkInput:function(f){var g=this;return new Promise(function(h,j){g._checkInput(f,0,h,j)})},_addValidInput:function(f,g){for(var h in f.unresolvedLength--,f.inputs)if(g===f.inputs[h].input){f.inputs[h].isValid=!0;break}},_addInvalidInput:function(f,g){for(var h in f.unresolvedLength--,f.invalidLength++,f.inputs)if(g===f.inputs[h].input){f.inputs[h].isValid=!1,f.invalidInputs[h]=g;break}},_getUnresolvedInputs:function(f){var g=[];for(var h in f.inputs)f.inputs[h].isValid||g.push(f.inputs[h].input);return g},_endSectionValidation:function(f,g,h){if(delete f.__bunny_validation_state,0===g.invalidLength)return h(!0);var j=[];for(var l in g.invalidInputs)j.push(g.invalidInputs[l]);return h(j)},_checkInput:function(f,g,h,j){var l=this,m=Object.keys(this.validators),n=m[g],o=this.validators[n];o(f).then(function(){g++,m[g]===void 0?(l.ui.removeErrorNode(l.ui.getInputGroup(f)),h()):l._checkInput(f,g,h,j)}).catch(function(q){var s=l.ui.getInputGroup(f),u=l.ui.getLabel(s),v=l._getErrorMessage(n,f,u,q);l.ui.setErrorMessage(s,v),j(v)})},_getErrorMessage:function(f,g,h,j){var l="";if("string"==typeof j)l=j;else{if(void 0===this.lang[f])throw new Error("Bunny Validation: Lang message not found for validator: "+f);l=this.lang[f]}for(var m in l=!1===h?g.placeholder&&""!==g.placeholder?l.replace("{label}",g.placeholder):l.replace("{label}",""):l.replace("{label}",h.textContent),j)l=l.replace("{"+m+"}",j[m]);return l}};document.addEventListener("DOMContentLoaded",function(){[].forEach.call(document.forms,function(a){if("bunny"===a.getAttribute("validator")){var f=a.hasAttribute("validator-inline");Validation.init(a,f)}})}),null!=document.forms[0]&&Validation.init(document.forms[0],!0);